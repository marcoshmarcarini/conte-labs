/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the
 * LICENSE file in the root directory of this source tree.
 * @flow
 */

import bizSdk from 'facebook-nodejs-business-sdk'

// const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const AdsInsights = bizSdk.AdsInsights;

let access_token = process.env.ACCESS_TOKEN;
let ad_account_id = process.env.AD_ACCOUNT_ID;
let app_secret = process.env.APP_SECRET;
let app_id = process.env.APP_ID;
const api = bizSdk.FacebookAdsApi.init(access_token);
const account = new AdAccount(ad_account_id);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

let ads_insights;
let ads_insights_id;

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

const fields = [
  'results',
  'result_rate',
  'reach',
  'frequency',
  'impressions',
  'delivery',
  'spend',
  'impressions_gross',
  'impressions_auto_refresh',
  'attribution_setting',
  'quality_score_organic',
  'quality_score_ectr',
  'quality_score_ecvr',
  'cost_per_result',
  'cpp',
  'cpm',
  'actions:page_engagement',
  'actions:like',
  'actions:comment',
  'actions:post_engagement',
  'actions:post_reaction',
  'actions:onsite_conversion.post_save',
  'actions:post',
  'actions:photo_view',
  'actions:rsvp',
  'actions:checkin',
  'ar_effect_share:ar_effect_share',
  'cost_per_action_type:page_engagement',
  'cost_per_action_type:like',
  'cost_per_action_type:post_engagement',
  'cost_per_action_type:rsvp',
  'actions:click_to_call_call_confirm',
  'actions:click_to_call_callback_request_submitted',
  'actions:onsite_conversion.messaging_user_call_placed',
  'actions:onsite_conversion.messaging_20s_call_connect',
  'actions:onsite_conversion.messaging_60s_call_connect',
  'unique_video_continuous_2_sec_watched_actions:video_view',
  'video_continuous_2_sec_watched_actions:video_view',
  'actions:video_view',
  'video_thruplay_watched_actions:video_view',
  'video_p25_watched_actions:video_view',
  'video_p50_watched_actions:video_view',
  'video_p75_watched_actions:video_view',
  'video_p95_watched_actions:video_view',
  'video_p100_watched_actions:video_view',
  'video_avg_time_watched_actions:video_view',
  'video_play_actions:video_view',
  'canvas_avg_view_time',
  'canvas_avg_view_percent',
  'cost_per_2_sec_continuous_video_view:video_view',
  'cost_per_action_type:video_view',
  'cost_per_thruplay:video_view',
  'actions:link_click',
  'unique_actions:link_click',
  'outbound_clicks:outbound_click',
  'unique_outbound_clicks:outbound_click',
  'website_ctr:link_click',
  'unique_link_clicks_ctr',
  'outbound_clicks_ctr:outbound_click',
  'unique_outbound_clicks_ctr:outbound_click',
  'clicks',
  'unique_clicks',
  'ctr',
  'unique_ctr',
  'instant_experience_clicks_to_open',
  'instant_experience_clicks_to_start',
  'instant_experience_outbound_clicks:outbound_click',
  'profile_visit_view',
  'cost_per_action_type:link_click',
  'cost_per_unique_action_type:link_click',
  'cost_per_outbound_click:outbound_click',
  'cost_per_unique_outbound_click:outbound_click',
  'cpc',
  'cost_per_unique_click',
  'estimated_ad_recallers',
  'estimated_ad_recall_rate',
  'cost_per_estimated_ad_recallers',
  'actions:omni_add_to_cart',
  'cost_per_action_type:omni_add_to_cart',
  'action_values:omni_add_to_cart',
  'unique_actions:omni_add_to_cart',
  'cost_per_unique_action_type:omni_add_to_cart',
  'actions:omni_add_to_wishlist',
  'cost_per_action_type:omni_add_to_wishlist',
  'action_values:omni_add_to_wishlist',
  'unique_actions:omni_add_to_wishlist',
  'cost_per_unique_action_type:omni_add_to_wishlist',
  'conversions:subscribe_total',
  'cost_per_conversion:subscribe_total',
  'conversion_values:subscribe_total',
  'actions:omni_activate_app',
  'cost_per_action_type:omni_activate_app',
  'action_values:omni_activate_app',
  'unique_actions:omni_activate_app',
  'cost_per_unique_action_type:omni_activate_app',
  'actions:lead',
  'cost_per_action_type:lead',
  'action_values:lead',
  'actions:omni_rate',
  'cost_per_action_type:omni_rate',
  'action_values:omni_rate',
  'unique_actions:omni_rate',
  'cost_per_unique_action_type:omni_rate',
  'actions:onsite_conversion.find_location',
  'conversions:ad_click_mobile_app',
  'cost_per_conversion:ad_click_mobile_app',
  'actions:onsite_conversion.click_to_call',
  'actions:omni_purchase',
  'cost_per_action_type:omni_purchase',
  'action_values:omni_purchase',
  'unique_actions:omni_purchase',
  'cost_per_unique_action_type:omni_purchase',
  'actions:onsite_conversion.flow_complete',
  'cost_per_action_type:onsite_conversion.flow_complete',
  'action_values:onsite_conversion.flow_complete',
  'actions:omni_achievement_unlocked',
  'cost_per_action_type:omni_achievement_unlocked',
  'action_values:omni_achievement_unlocked',
  'unique_actions:omni_achievement_unlocked',
  'cost_per_unique_action_type:omni_achievement_unlocked',
  'conversions:contact_total',
  'cost_per_conversion:contact_total',
  'conversion_values:contact_total',
  'conversions:donate_total',
  'cost_per_conversion:donate_total',
  'conversion_values:donate_total',
  'actions:app_engagement',
  'cost_per_action_type:app_engagement',
  'actions:app_story',
  'cost_per_action_type:app_story',
  'actions:omni_custom',
  'cost_per_action_type:omni_custom',
  'actions:omni_initiated_checkout',
  'cost_per_action_type:omni_initiated_checkout',
  'action_values:omni_initiated_checkout',
  'unique_actions:omni_initiated_checkout',
  'cost_per_unique_action_type:omni_initiated_checkout',
  'actions:omni_spend_credits',
  'cost_per_action_type:omni_spend_credits',
  'action_values:omni_spend_credits',
  'unique_actions:omni_spend_credits',
  'cost_per_unique_action_type:omni_spend_credits',
  'conversions:schedule_total',
  'cost_per_conversion:schedule_total',
  'conversion_values:schedule_total',
  'conversions:ad_impression_mobile_app',
  'cost_per_conversion:ad_impression_mobile_app',
  'actions:add_payment_info',
  'cost_per_action_type:add_payment_info',
  'action_values:add_payment_info',
  'unique_actions:add_payment_info',
  'cost_per_unique_action_type:add_payment_info',
  'conversions:submit_application_total',
  'cost_per_conversion:submit_application_total',
  'conversion_values:submit_application_total',
  'actions:omni_app_install',
  'cost_per_action_type:omni_app_install',
  'actions:omni_level_achieved',
  'cost_per_action_type:omni_level_achieved',
  'action_values:omni_level_achieved',
  'unique_actions:omni_level_achieved',
  'cost_per_unique_action_type:omni_level_achieved',
  'actions:offline_conversion.other',
  'cost_per_action_type:offline_conversion.other',
  'action_values:offline_conversion.other',
  'actions:onsite_conversion.messaging_order_created_v2',
  'actions:onsite_conversion.messaging_order_shipped_v2',
  'conversions:start_trial_total',
  'cost_per_conversion:start_trial_total',
  'conversion_values:start_trial_total',
  'actions:omni_search',
  'cost_per_action_type:omni_search',
  'action_values:omni_search',
  'unique_actions:omni_search',
  'cost_per_unique_action_type:omni_search',
  'conversions:find_location_total',
  'cost_per_conversion:find_location_total',
  'conversion_values:find_location_total',
  'conversions:customize_product_total',
  'cost_per_conversion:customize_product_total',
  'conversion_values:customize_product_total',
  'actions:omni_complete_registration',
  'cost_per_action_type:omni_complete_registration',
  'action_values:omni_complete_registration',
  'unique_actions:omni_complete_registration',
  'cost_per_unique_action_type:omni_complete_registration',
  'actions:app_custom_event.fb_mobile_d2_retention',
  'cost_per_action_type:app_custom_event.fb_mobile_d2_retention',
  'unique_actions:app_custom_event.fb_mobile_d2_retention',
  'cost_per_unique_action_type:app_custom_event.fb_mobile_d2_retention',
  'actions:app_custom_event.fb_mobile_d7_retention',
  'cost_per_action_type:app_custom_event.fb_mobile_d7_retention',
  'unique_actions:app_custom_event.fb_mobile_d7_retention',
  'cost_per_unique_action_type:app_custom_event.fb_mobile_d7_retention',
  'purchase_roas:omni_purchase',
  'actions:games.plays',
  'cost_per_action_type:games.plays',
  'actions:omni_tutorial_completion',
  'cost_per_action_type:omni_tutorial_completion',
  'action_values:omni_tutorial_completion',
  'unique_actions:omni_tutorial_completion',
  'cost_per_unique_action_type:omni_tutorial_completion',
  'actions:app_use',
  'cost_per_action_type:app_use',
  'actions:landing_page_view',
  'cost_per_action_type:landing_page_view',
  'unique_actions:landing_page_view',
  'cost_per_unique_action_type:landing_page_view',
  'actions:omni_view_content',
  'cost_per_action_type:omni_view_content',
  'action_values:omni_view_content',
  'unique_actions:omni_view_content',
  'cost_per_unique_action_type:omni_view_content',
  'actions:app_custom_event.fb_mobile_add_to_cart',
  'actions:offsite_conversion.fb_pixel_add_to_cart',
  'actions:offline_conversion.add_to_cart',
  'actions:onsite_conversion.add_to_cart',
  'action_values:app_custom_event.fb_mobile_add_to_cart',
  'action_values:offsite_conversion.fb_pixel_add_to_cart',
  'action_values:offline_conversion.add_to_cart',
  'unique_actions:app_custom_event.fb_mobile_add_to_cart',
  'actions:app_custom_event.fb_mobile_add_to_wishlist',
  'actions:offsite_conversion.fb_pixel_add_to_wishlist',
  'actions:offline_conversion.add_to_wishlist',
  'actions:onsite_conversion.add_to_wishlist',
  'action_values:app_custom_event.fb_mobile_add_to_wishlist',
  'action_values:offsite_conversion.fb_pixel_add_to_wishlist',
  'action_values:offline_conversion.add_to_wishlist',
  'action_values:onsite_conversion.add_to_wishlist',
  'unique_actions:app_custom_event.fb_mobile_add_to_wishlist',
  'conversions:subscribe_mobile_app',
  'conversions:subscribe_website',
  'conversions:subscribe_offline',
  'conversion_values:subscribe_mobile_app',
  'conversion_values:subscribe_website',
  'conversion_values:subscribe_offline',
  'actions:app_custom_event.fb_mobile_activate_app',
  'action_values:app_custom_event.fb_mobile_activate_app',
  'unique_actions:app_custom_event.fb_mobile_activate_app',
  'actions:offsite_conversion.fb_pixel_lead',
  'actions:offline_conversion.lead',
  'actions:onsite_conversion.lead_grouped',
  'action_values:offsite_conversion.fb_pixel_lead',
  'action_values:offline_conversion.lead',
  'action_values:onsite_conversion.lead_grouped',
  'actions:app_custom_event.fb_mobile_rate',
  'action_values:app_custom_event.fb_mobile_rate',
  'unique_actions:app_custom_event.fb_mobile_rate',
  'actions:app_custom_event.fb_mobile_purchase',
  'actions:offsite_conversion.fb_pixel_purchase',
  'actions:offline_conversion.purchase',
  'actions:onsite_conversion.purchase',
  'action_values:app_custom_event.fb_mobile_purchase',
  'action_values:offsite_conversion.fb_pixel_purchase',
  'action_values:offline_conversion.purchase',
  'action_values:onsite_conversion.purchase',
  'unique_actions:app_custom_event.fb_mobile_purchase',
  'actions:app_custom_event.fb_mobile_achievement_unlocked',
  'action_values:app_custom_event.fb_mobile_achievement_unlocked',
  'unique_actions:app_custom_event.fb_mobile_achievement_unlocked',
  'conversions:contact_mobile_app',
  'conversions:contact_website',
  'conversions:contact_offline',
  'conversion_values:contact_mobile_app',
  'conversion_values:contact_website',
  'conversion_values:contact_offline',
  'conversions:donate_mobile_app',
  'conversions:donate_website',
  'conversions:donate_offline',
  'conversion_values:donate_mobile_app',
  'conversion_values:donate_website',
  'conversion_values:donate_offline',
  'actions:app_custom_event.other',
  'actions:app_custom_event.fb_mobile_initiated_checkout',
  'actions:offsite_conversion.fb_pixel_initiate_checkout',
  'actions:offline_conversion.initiate_checkout',
  'action_values:app_custom_event.fb_mobile_initiated_checkout',
  'action_values:offsite_conversion.fb_pixel_initiate_checkout',
  'action_values:offline_conversion.initiate_checkout',
  'unique_actions:app_custom_event.fb_mobile_initiated_checkout',
  'actions:app_custom_event.fb_mobile_spent_credits',
  'actions:credit_spent',
  'action_values:app_custom_event.fb_mobile_spent_credits',
  'action_values:credit_spent',
  'unique_actions:app_custom_event.fb_mobile_spent_credits',
  'cost_per_unique_action_type:app_custom_event.fb_mobile_spent_credits',
  'conversions:schedule_mobile_app',
  'conversions:schedule_website',
  'conversions:schedule_offline',
  'conversion_values:schedule_mobile_app',
  'conversion_values:schedule_website',
  'conversion_values:schedule_offline',
  'actions:app_custom_event.fb_mobile_add_payment_info',
  'actions:offsite_conversion.fb_pixel_add_payment_info',
  'actions:offline_conversion.add_payment_info',
  'action_values:app_custom_event.fb_mobile_add_payment_info',
  'action_values:offsite_conversion.fb_pixel_add_payment_info',
  'action_values:offline_conversion.add_payment_info',
  'unique_actions:app_custom_event.fb_mobile_add_payment_info',
  'conversions:submit_application_mobile_app',
  'conversions:submit_application_website',
  'conversions:submit_application_offline',
  'conversion_values:submit_application_mobile_app',
  'conversion_values:submit_application_website',
  'conversion_values:submit_application_offline',
  'actions:mobile_app_install',
  'actions:app_install',
  'actions:app_custom_event.fb_mobile_level_achieved',
  'action_values:app_custom_event.fb_mobile_level_achieved',
  'unique_actions:app_custom_event.fb_mobile_level_achieved',
  'conversions:start_trial_mobile_app',
  'conversions:start_trial_website',
  'conversions:start_trial_offline',
  'conversion_values:start_trial_mobile_app',
  'conversion_values:start_trial_website',
  'conversion_values:start_trial_offline',
  'actions:app_custom_event.fb_mobile_search',
  'actions:offsite_conversion.fb_pixel_search',
  'actions:offline_conversion.search',
  'action_values:app_custom_event.fb_mobile_search',
  'action_values:offsite_conversion.fb_pixel_search',
  'action_values:offline_conversion.search',
  'unique_actions:app_custom_event.fb_mobile_search',
  'conversions:find_location_mobile_app',
  'conversions:find_location_website',
  'conversions:find_location_offline',
  'conversion_values:find_location_mobile_app',
  'conversion_values:find_location_website',
  'conversion_values:find_location_offline',
  'conversions:customize_product_mobile_app',
  'conversions:customize_product_website',
  'conversions:customize_product_offline',
  'conversion_values:customize_product_mobile_app',
  'conversion_values:customize_product_website',
  'conversion_values:customize_product_offline',
  'actions:app_custom_event.fb_mobile_complete_registration',
  'actions:offsite_conversion.fb_pixel_complete_registration',
  'actions:offline_conversion.complete_registration',
  'action_values:app_custom_event.fb_mobile_complete_registration',
  'action_values:offsite_conversion.fb_pixel_complete_registration',
  'action_values:offline_conversion.complete_registration',
  'unique_actions:app_custom_event.fb_mobile_complete_registration',
  'website_purchase_roas:offsite_conversion.fb_pixel_purchase',
  'mobile_app_purchase_roas:app_custom_event.fb_mobile_purchase',
  'actions:app_custom_event.fb_mobile_tutorial_completion',
  'action_values:app_custom_event.fb_mobile_tutorial_completion',
  'unique_actions:app_custom_event.fb_mobile_tutorial_completion',
  'actions:app_custom_event.fb_mobile_content_view',
  'actions:offsite_conversion.fb_pixel_view_content',
  'actions:offline_conversion.view_content',
  'actions:onsite_conversion.view_content',
  'action_values:app_custom_event.fb_mobile_content_view',
  'action_values:offsite_conversion.fb_pixel_view_content',
  'action_values:offline_conversion.view_content',
  'unique_actions:app_custom_event.fb_mobile_content_view',
  'date_start',
  'date_stop',
  'account_id',
  'account_name',
  'campaign_group_name',
  'campaign_group_id',
  'campaign_name',
  'campaign_id',
  'adgroup_id',
  'adgroup_name',
  'objective',
  'buying_type',
  'start_time',
  'stop_time',
  'bid',
  'budget',
  'schedule',
  'split_test_split',
  'split_test_variable',
  'optimization_results',
  'cost_per_optimization_result',
  'last_significant_edit',
];
const params = {
  'time_range' : {'since':'2024-06-13','until':'2024-07-13'},
  'filtering' : [],
  'level' : 'account',
  'breakdowns' : [],
};
 (new AdAccount(ad_account_id)).getInsights(
  fields,
  params
)
.then((result) => {
  logApiCallResult('ads_insights api call complete.', result);
  ads_insights_id = result[0].id;
})
.catch((error) => {
  console.log(error);
});


export default logApiCallResult
